<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>JavaScript Sync/Async forEach | estebang23.github.io</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="JavaScript Sync/Async forEach" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/node_modules/async-foreach/" />
<meta property="og:url" content="http://localhost:4000/node_modules/async-foreach/" />
<meta property="og:site_name" content="estebang23.github.io" />
<script type="application/ld+json">
{"@type":"WebPage","url":"http://localhost:4000/node_modules/async-foreach/","headline":"JavaScript Sync/Async forEach","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=08194154e5c3f87742365edb210c0599bab19902">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">estebang23.github.io</a></h1>
      

      <h1 id="javascript-syncasync-foreach">JavaScript Sync/Async forEach</h1>

<p>An optionally-asynchronous forEach with an interesting interface.</p>

<h2 id="getting-started">Getting Started</h2>

<p>This code should work just fine in Node.js:</p>

<p>First, install the module with: <code class="highlighter-rouge">npm install async-foreach</code></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">forEach</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'async-foreach'</span><span class="p">).</span><span class="nx">forEach</span><span class="p">;</span>
<span class="nx">forEach</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"each"</span><span class="p">,</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">);</span>
<span class="p">});</span>
<span class="c1">// logs:</span>
<span class="c1">// each a 0 ["a", "b", "c"]</span>
<span class="c1">// each b 1 ["a", "b", "c"]</span>
<span class="c1">// each c 2 ["a", "b", "c"]</span>
</code></pre></div></div>

<p>Or in the browser:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"dist/ba-foreach.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="nx">forEach</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"each"</span><span class="p">,</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">);</span>
<span class="p">});</span>
<span class="c1">// logs:</span>
<span class="c1">// each a 0 ["a", "b", "c"]</span>
<span class="c1">// each b 1 ["a", "b", "c"]</span>
<span class="c1">// each c 2 ["a", "b", "c"]</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>In the browser, you can attach the forEach method to any object.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script&gt;</span>
<span class="k">this</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Bocoup</span><span class="p">.</span><span class="nx">utils</span><span class="p">;</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"dist/ba-foreach.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="nx">Bocoup</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">forEach</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"each"</span><span class="p">,</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">);</span>
<span class="p">});</span>
<span class="c1">// logs:</span>
<span class="c1">// each a 0 ["a", "b", "c"]</span>
<span class="c1">// each b 1 ["a", "b", "c"]</span>
<span class="c1">// each c 2 ["a", "b", "c"]</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<h2 id="the-general-idea-why-i-thought-this-was-worth-sharing">The General Idea (Why I thought this was worth sharing)</h2>

<p>The idea is to allow the callback to decide <em>at runtime</em> whether the loop will be synchronous or asynchronous. By using <code class="highlighter-rouge">this</code> in a creative way (in situations where that value isn’t already spoken for), an entire control API can be offered without over-complicating function signatures.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">forEach</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Synchronous.</span>
<span class="p">});</span>

<span class="nx">forEach</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Only when `this.async` is called does iteration becomes asynchronous. The</span>
  <span class="c1">// loop won't be continued until the `done` function is executed.</span>
  <span class="kd">var</span> <span class="nx">done</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="k">async</span><span class="p">();</span>
  <span class="c1">// Continue in one second.</span>
  <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">forEach</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Break out of synchronous iteration early by returning false.</span>
  <span class="k">return</span> <span class="nx">index</span> <span class="o">!==</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">});</span>

<span class="nx">forEach</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Break out of asynchronous iteration early...</span>
  <span class="kd">var</span> <span class="nx">done</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="k">async</span><span class="p">();</span>
  <span class="c1">// ...by passing false to the done function.</span>
  <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">done</span><span class="p">(</span><span class="nx">index</span> <span class="o">!==</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="examples">Examples</h2>
<p>See the unit tests for more examples.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Generic "done" callback.</span>
<span class="kd">function</span> <span class="nx">allDone</span><span class="p">(</span><span class="nx">notAborted</span><span class="p">,</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"done"</span><span class="p">,</span> <span class="nx">notAborted</span><span class="p">,</span> <span class="nx">arr</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Synchronous.</span>
<span class="nx">forEach</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"each"</span><span class="p">,</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">);</span>
<span class="p">},</span> <span class="nx">allDone</span><span class="p">);</span>
<span class="c1">// logs:</span>
<span class="c1">// each a 0 ["a", "b", "c"]</span>
<span class="c1">// each b 1 ["a", "b", "c"]</span>
<span class="c1">// each c 2 ["a", "b", "c"]</span>
<span class="c1">// done true ["a", "b", "c"]</span>

<span class="c1">// Synchronous with early abort.</span>
<span class="nx">forEach</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"each"</span><span class="p">,</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">item</span> <span class="o">===</span> <span class="s2">"b"</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="p">}</span>
<span class="p">},</span> <span class="nx">allDone</span><span class="p">);</span>
<span class="c1">// logs:</span>
<span class="c1">// each a 0 ["a", "b", "c"]</span>
<span class="c1">// each b 1 ["a", "b", "c"]</span>
<span class="c1">// done false ["a", "b", "c"]</span>

<span class="c1">// Asynchronous.</span>
<span class="nx">forEach</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"each"</span><span class="p">,</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">done</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="k">async</span><span class="p">();</span>
  <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">done</span><span class="p">();</span>
  <span class="p">},</span> <span class="mi">500</span><span class="p">);</span>
<span class="p">},</span> <span class="nx">allDone</span><span class="p">);</span>
<span class="c1">// logs:</span>
<span class="c1">// each a 0 ["a", "b", "c"]</span>
<span class="c1">// each b 1 ["a", "b", "c"]</span>
<span class="c1">// each c 2 ["a", "b", "c"]</span>
<span class="c1">// done true ["a", "b", "c"]</span>

<span class="c1">// Asynchronous with early abort.</span>
<span class="nx">forEach</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"each"</span><span class="p">,</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">done</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="k">async</span><span class="p">();</span>
  <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">done</span><span class="p">(</span><span class="nx">item</span> <span class="o">!==</span> <span class="s2">"b"</span><span class="p">);</span>
  <span class="p">},</span> <span class="mi">500</span><span class="p">);</span>
<span class="p">},</span> <span class="nx">allDone</span><span class="p">);</span>
<span class="c1">// logs:</span>
<span class="c1">// each a 0 ["a", "b", "c"]</span>
<span class="c1">// each b 1 ["a", "b", "c"]</span>
<span class="c1">// done false ["a", "b", "c"]</span>

<span class="c1">// Not actually asynchronous.</span>
<span class="nx">forEach</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"each"</span><span class="p">,</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">done</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="k">async</span><span class="p">()</span>
  <span class="nx">done</span><span class="p">();</span>
<span class="p">},</span> <span class="nx">allDone</span><span class="p">);</span>
<span class="c1">// logs:</span>
<span class="c1">// each a 0 ["a", "b", "c"]</span>
<span class="c1">// each b 1 ["a", "b", "c"]</span>
<span class="c1">// each c 2 ["a", "b", "c"]</span>
<span class="c1">// done true ["a", "b", "c"]</span>

<span class="c1">// Not actually asynchronous with early abort.</span>
<span class="nx">forEach</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"each"</span><span class="p">,</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">arr</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">done</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="k">async</span><span class="p">();</span>
  <span class="nx">done</span><span class="p">(</span><span class="nx">item</span> <span class="o">!==</span> <span class="s2">"b"</span><span class="p">);</span>
<span class="p">},</span> <span class="nx">allDone</span><span class="p">);</span>
<span class="c1">// logs:</span>
<span class="c1">// each a 0 ["a", "b", "c"]</span>
<span class="c1">// each b 1 ["a", "b", "c"]</span>
<span class="c1">// done false ["a", "b", "c"]</span>
</code></pre></div></div>

<h2 id="contributing">Contributing</h2>
<p>In lieu of a formal styleguide, take care to maintain the existing coding style. Add unit tests for any new or changed functionality. Lint and test your code using <a href="https://github.com/cowboy/grunt">grunt</a>.</p>

<p><em>Also, please don’t edit files in the “dist” subdirectory as they are generated via grunt. You’ll find source code in the “lib” subdirectory!</em></p>

<h2 id="release-history">Release History</h2>

<p>04/29/2013
v0.1.3
Removed hard Node.js version dependency.</p>

<p>11/17/2011
v0.1.2
Adding sparse array support.
Invalid length properties are now sanitized.
This closes issue #1 (like a boss).</p>

<p>11/11/2011
v0.1.1
Refactored code to be much simpler. Yay for unit tests!</p>

<p>11/11/2011
v0.1.0
Initial Release.</p>

<h2 id="license">License</h2>
<p>Copyright (c) 2012 “Cowboy” Ben Alman<br />
Licensed under the MIT license.<br />
<a href="http://benalman.com/about/license/">http://benalman.com/about/license/</a></p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
    
  </body>
</html>
