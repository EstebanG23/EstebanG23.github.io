<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Building LibSass with MingGW (makefiles) | estebang23.github.io</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Building LibSass with MingGW (makefiles)" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/node_modules/node-sass/src/libsass/docs/build-with-mingw.html" />
<meta property="og:url" content="http://localhost:4000/node_modules/node-sass/src/libsass/docs/build-with-mingw.html" />
<meta property="og:site_name" content="estebang23.github.io" />
<script type="application/ld+json">
{"@type":"WebPage","url":"http://localhost:4000/node_modules/node-sass/src/libsass/docs/build-with-mingw.html","headline":"Building LibSass with MingGW (makefiles)","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=08194154e5c3f87742365edb210c0599bab19902">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">estebang23.github.io</a></h1>
      

      <h2 id="building-libsass-with-minggw-makefiles">Building LibSass with MingGW (makefiles)</h2>

<p>First grab the latest <a href="http://sourceforge.net/projects/mingw/files/latest/download?source=files">MinGW for windows</a> installer. Once it is installed, you can click on continue or open the Installation Manager via <code class="highlighter-rouge">bin\mingw-get.exe</code>.</p>

<p>You need to have the following components installed:
<img src="https://cloud.githubusercontent.com/assets/282293/5525466/947bf396-89e6-11e4-841d-4aa916f14de1.png" alt="" /></p>

<p>Next we need to install <a href="https://msysgit.github.io/">git for windows</a>. You probably want to check the option to add it to the global path, but you do not need to install the unix tools.</p>

<p>If you want to run the spec test-suite you also need <a href="http://rubyinstaller.org/">ruby</a> and a few gems available. Grab the <a href="http://rubyinstaller.org/">latest installer</a> and make sure to add it the global path. Then install the missing gems:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem install minitest
</code></pre></div></div>

<h3 id="mount-the-mingw-root-directory">Mount the mingw root directory</h3>

<p>As mentioned in the <a href="http://www.mingw.org/wiki/Getting_Started#toc5">MinGW Getting Started</a> guide, you should edit <code class="highlighter-rouge">C:\MinGW\msys\1.0\etc\fstab</code> to contain the following line:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\MinGW   /mingw
</code></pre></div></div>

<h3 id="starting-a-minggw-console">Starting a “MingGW” console</h3>

<p>Create a batch file with this content:</p>
<pre><code class="language-bat">@echo off
set PATH=C:\MinGW\bin;%PATH%
REM only needed if not already available
set PATH=%PROGRAMFILES%\git\bin;%PATH%
REM C:\MinGW\msys\1.0\msys.bat
cmd
</code></pre>

<p>Execute it and make sure these commands can be called: <code class="highlighter-rouge">git</code>, <code class="highlighter-rouge">mingw32-make</code>, <code class="highlighter-rouge">rm</code> and <code class="highlighter-rouge">gcc</code>! Once this is all set, you should be ready to compile <code class="highlighter-rouge">libsass</code>!</p>

<h3 id="get-the-sources">Get the sources</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># using git is preferred</span>
git clone https://github.com/sass/libsass.git
<span class="c"># only needed for sassc and/or testsuite</span>
git clone https://github.com/sass/sassc.git libsass/sassc
git clone https://github.com/sass/sass-spec.git libsass/sass-spec
</code></pre></div></div>

<h3 id="decide-for-static-or-shared-library">Decide for static or shared library</h3>

<p><code class="highlighter-rouge">libsass</code> can be built and linked as a <code class="highlighter-rouge">static</code> or as a <code class="highlighter-rouge">shared</code> library. The default is <code class="highlighter-rouge">static</code>. To change it you can set the <code class="highlighter-rouge">BUILD</code> environment variable:</p>

<pre><code class="language-bat">set BUILD="shared"
</code></pre>

<h3 id="compile-the-library">Compile the library</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mingw32-make <span class="nt">-C</span> libsass
</code></pre></div></div>

<h3 id="results-can-be-found-in">Results can be found in</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">ls </span>libsass/lib
libsass.a  libsass.dll  libsass.so
</code></pre></div></div>

<h3 id="run-the-spec-test-suite">Run the spec test-suite</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mingw32-make <span class="nt">-C</span> libsass test_build
</code></pre></div></div>

<h2 id="building-via-minggw-64bit-makefiles">Building via MingGW 64bit (makefiles)</h2>
<p>Building libass to dll on window 64bit.</p>

<p>Download <a href="http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/mingw-builds/4.9.2/threads-win32/seh/x86_64-4.9.2-release-win32-seh-rt_v3-rev0.7z/download">MinGW64 for windows7 64bit</a> and unzip to “C:\mingw64”.</p>

<p>Create a batch file with this content:</p>

<pre><code class="language-bat">@echo off
set PATH=C:\mingw64\bin;%PATH%
set CC=gcc
REM only needed if not already available
set PATH=%PROGRAMFILES%\Git\bin;%PATH%
REM C:\MinGW\msys\1.0\msys.bat
cmd
</code></pre>

<p>By default, mingw64 dll will depends on “​m​i​n​g​w​m​1​0​.​d​l​l​、​ ​l​i​b​g​c​c​<em>​s​</em>​d​w​2​-​1​.​d​l​l​”, we can modify Makefile to fix this:(add “-static”)</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lib/libsass.dll: <span class="k">$(</span>COBJECTS<span class="k">)</span> <span class="k">$(</span>OBJECTS<span class="k">)</span> <span class="k">$(</span>RCOBJECTS<span class="k">)</span>
	<span class="k">$(</span>MKDIR<span class="k">)</span> lib
	<span class="k">$(</span>CXX<span class="k">)</span> <span class="nt">-shared</span> <span class="k">$(</span>LDFLAGS<span class="k">)</span> <span class="nt">-o</span> <span class="nv">$@</span> <span class="k">$(</span>COBJECTS<span class="k">)</span> <span class="k">$(</span>OBJECTS<span class="k">)</span> <span class="k">$(</span>RCOBJECTS<span class="k">)</span> <span class="k">$(</span>LDLIBS<span class="k">)</span> <span class="nt">-s</span> <span class="nt">-static</span> <span class="nt">-Wl</span>,--subsystem,windows,--out-implib,lib/libsass.a
</code></pre></div></div>

<p>Compile the library</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mingw32-make <span class="nt">-C</span> libsass
</code></pre></div></div>

<p>By the way, if you are using java jna, <a href="http://jnaerator.googlecode.com/">JNAerator</a> is a good tool.</p>



      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
    
  </body>
</html>
