<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>ajv-keywords | estebang23.github.io</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="ajv-keywords" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/node_modules/ajv-keywords/" />
<meta property="og:url" content="http://localhost:4000/node_modules/ajv-keywords/" />
<meta property="og:site_name" content="estebang23.github.io" />
<script type="application/ld+json">
{"@type":"WebPage","url":"http://localhost:4000/node_modules/ajv-keywords/","headline":"ajv-keywords","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=08194154e5c3f87742365edb210c0599bab19902">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">estebang23.github.io</a></h1>
      

      <h1 id="ajv-keywords">ajv-keywords</h1>

<p>Custom JSON-Schema keywords for <a href="https://github.com/epoberezkin/ajv">Ajv</a> validator</p>

<p><a href="https://travis-ci.org/epoberezkin/ajv-keywords"><img src="https://travis-ci.org/epoberezkin/ajv-keywords.svg?branch=master" alt="Build Status" /></a>
<a href="https://www.npmjs.com/package/ajv-keywords"><img src="https://img.shields.io/npm/v/ajv-keywords.svg" alt="npm" /></a>
<a href="https://www.npmjs.com/package/ajv-keywords"><img src="https://img.shields.io/npm/dm/ajv-keywords.svg" alt="npm downloads" /></a>
<a href="https://coveralls.io/github/epoberezkin/ajv-keywords?branch=master"><img src="https://coveralls.io/repos/github/epoberezkin/ajv-keywords/badge.svg?branch=master" alt="Coverage Status" /></a>
<a href="https://greenkeeper.io/"><img src="https://badges.greenkeeper.io/epoberezkin/ajv-keywords.svg" alt="Greenkeeper badge" /></a>
<a href="https://gitter.im/ajv-validator/ajv"><img src="https://img.shields.io/gitter/room/ajv-validator/ajv.svg" alt="Gitter" /></a></p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="#install">Install</a></li>
  <li><a href="#usage">Usage</a></li>
  <li><a href="#keywords">Keywords</a>
    <ul>
      <li><a href="#typeof">typeof</a></li>
      <li><a href="#instanceof">instanceof</a></li>
      <li><a href="#range-and-exclusiverange">range and exclusiveRange</a></li>
      <li><a href="#switch">switch</a></li>
      <li><a href="#selectselectcasesselectdefault">select/selectCases/selectDefault</a> (BETA)</li>
      <li><a href="#patternrequired">patternRequired</a></li>
      <li><a href="#prohibited">prohibited</a></li>
      <li><a href="#deepproperties">deepProperties</a></li>
      <li><a href="#deeprequired">deepRequired</a></li>
      <li><a href="#uniqueitemproperties">uniqueItemProperties</a></li>
      <li><a href="#regexp">regexp</a></li>
      <li><a href="#formatmaximum--formatminimum-and-formatexclusivemaximum--formatexclusiveminimum">formatMaximum / formatMinimum and formatExclusiveMaximum / formatExclusiveMinimum</a></li>
      <li><a href="#dynamicdefaults">dynamicDefaults</a></li>
    </ul>
  </li>
  <li><a href="#license">License</a></li>
</ul>

<h2 id="install">Install</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install ajv-keywords
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<p>To add all available keywords:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Ajv</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'ajv'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">ajv</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Ajv</span><span class="p">;</span>
<span class="nx">require</span><span class="p">(</span><span class="s1">'ajv-keywords'</span><span class="p">)(</span><span class="nx">ajv</span><span class="p">);</span>

<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span> <span class="na">instanceof</span><span class="p">:</span> <span class="s1">'RegExp'</span> <span class="p">},</span> <span class="sr">/.*/</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span> <span class="na">instanceof</span><span class="p">:</span> <span class="s1">'RegExp'</span> <span class="p">},</span> <span class="s1">'.*'</span><span class="p">);</span> <span class="c1">// false</span>
</code></pre></div></div>

<p>To add a single keyword:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="s1">'ajv-keywords'</span><span class="p">)(</span><span class="nx">ajv</span><span class="p">,</span> <span class="s1">'instanceof'</span><span class="p">);</span>
</code></pre></div></div>

<p>To add multiple keywords:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="s1">'ajv-keywords'</span><span class="p">)(</span><span class="nx">ajv</span><span class="p">,</span> <span class="p">[</span><span class="s1">'typeof'</span><span class="p">,</span> <span class="s1">'instanceof'</span><span class="p">]);</span>
</code></pre></div></div>

<p>To add a single keyword in browser (to avoid adding unused code):</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="s1">'ajv-keywords/keywords/instanceof'</span><span class="p">)(</span><span class="nx">ajv</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="keywords">Keywords</h2>

<h3 id="typeof"><code class="highlighter-rouge">typeof</code></h3>

<p>Based on JavaScript <code class="highlighter-rouge">typeof</code> operation.</p>

<p>The value of the keyword should be a string (<code class="highlighter-rouge">"undefined"</code>, <code class="highlighter-rouge">"string"</code>, <code class="highlighter-rouge">"number"</code>, <code class="highlighter-rouge">"object"</code>, <code class="highlighter-rouge">"function"</code>, <code class="highlighter-rouge">"boolean"</code> or <code class="highlighter-rouge">"symbol"</code>) or array of strings.</p>

<p>To pass validation the result of <code class="highlighter-rouge">typeof</code> operation on the value should be equal to the string (or one of the strings in the array).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ajv.validate({ typeof: 'undefined' }, undefined); // true
ajv.validate({ typeof: 'undefined' }, null); // false
ajv.validate({ typeof: ['undefined', 'object'] }, null); // true
</code></pre></div></div>

<h3 id="instanceof"><code class="highlighter-rouge">instanceof</code></h3>

<p>Based on JavaScript <code class="highlighter-rouge">instanceof</code> operation.</p>

<p>The value of the keyword should be a string (<code class="highlighter-rouge">"Object"</code>, <code class="highlighter-rouge">"Array"</code>, <code class="highlighter-rouge">"Function"</code>, <code class="highlighter-rouge">"Number"</code>, <code class="highlighter-rouge">"String"</code>, <code class="highlighter-rouge">"Date"</code>, <code class="highlighter-rouge">"RegExp"</code>, <code class="highlighter-rouge">"Promise"</code> or <code class="highlighter-rouge">"Buffer"</code>) or array of strings.</p>

<p>To pass validation the result of <code class="highlighter-rouge">data instanceof ...</code> operation on the value should be true:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ajv.validate({ instanceof: 'Array' }, []); // true
ajv.validate({ instanceof: 'Array' }, {}); // false
ajv.validate({ instanceof: ['Array', 'Function'] }, function(){}); // true
</code></pre></div></div>

<p>You can add your own constructor function to be recognised by this keyword:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">MyClass</span><span class="p">()</span> <span class="p">{}</span>
<span class="kd">var</span> <span class="nx">instanceofDefinition</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'ajv-keywords'</span><span class="p">).</span><span class="kd">get</span><span class="p">(</span><span class="s1">'instanceof'</span><span class="p">).</span><span class="nx">definition</span><span class="p">;</span>
<span class="c1">// or require('ajv-keywords/keywords/instanceof').definition;</span>
<span class="nx">instanceofDefinition</span><span class="p">.</span><span class="nx">CONSTRUCTORS</span><span class="p">.</span><span class="nx">MyClass</span> <span class="o">=</span> <span class="nx">MyClass</span><span class="p">;</span>

<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">({</span> <span class="na">instanceof</span><span class="p">:</span> <span class="s1">'MyClass'</span> <span class="p">},</span> <span class="k">new</span> <span class="nx">MyClass</span><span class="p">);</span> <span class="c1">// true</span>
</code></pre></div></div>

<h3 id="range-and-exclusiverange"><code class="highlighter-rouge">range</code> and <code class="highlighter-rouge">exclusiveRange</code></h3>

<p>Syntax sugar for the combination of minimum and maximum keywords, also fails schema compilation if there are no numbers in the range.</p>

<p>The value of this keyword must be the array consisting of two numbers, the second must be greater or equal than the first one.</p>

<p>If the validated value is not a number the validation passes, otherwise to pass validation the value should be greater (or equal) than the first number and smaller (or equal) than the second number in the array. If <code class="highlighter-rouge">exclusiveRange</code> keyword is present in the same schema and its value is true, the validated value must not be equal to the range boundaries.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span> <span class="na">range</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="p">};</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">);</span> <span class="c1">// false</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mf">3.01</span><span class="p">);</span> <span class="c1">// false</span>

<span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span> <span class="na">range</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="na">exclusiveRange</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mf">1.01</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mf">2.99</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// false</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span> <span class="c1">// false</span>
</code></pre></div></div>

<h3 id="switch"><code class="highlighter-rouge">switch</code></h3>

<p>This keyword allows to perform advanced conditional validation.</p>

<p>The value of the keyword is the array of if/then clauses. Each clause is the object with the following properties:</p>

<ul>
  <li><code class="highlighter-rouge">if</code> (optional) - the value is JSON-schema</li>
  <li><code class="highlighter-rouge">then</code> (required) - the value is JSON-schema or boolean</li>
  <li><code class="highlighter-rouge">continue</code> (optional) - the value is boolean</li>
</ul>

<p>The validation process is dynamic; all clauses are executed sequentially in the following way:</p>

<ol>
  <li><code class="highlighter-rouge">if</code>:
    <ol>
      <li><code class="highlighter-rouge">if</code> property is JSON-schema according to which the data is:
        <ol>
          <li>valid =&gt; go to step 2.</li>
          <li>invalid =&gt; go to the NEXT clause, if this was the last clause the validation of <code class="highlighter-rouge">switch</code> SUCCEEDS.</li>
        </ol>
      </li>
      <li><code class="highlighter-rouge">if</code> property is absent =&gt; go to step 2.</li>
    </ol>
  </li>
  <li><code class="highlighter-rouge">then</code>:
    <ol>
      <li><code class="highlighter-rouge">then</code> property is <code class="highlighter-rouge">true</code> or it is JSON-schema according to which the data is valid =&gt; go to step 3.</li>
      <li><code class="highlighter-rouge">then</code> property is <code class="highlighter-rouge">false</code> or it is JSON-schema according to which the data is invalid =&gt; the validation of <code class="highlighter-rouge">switch</code> FAILS.</li>
    </ol>
  </li>
  <li><code class="highlighter-rouge">continue</code>:
    <ol>
      <li><code class="highlighter-rouge">continue</code> property is <code class="highlighter-rouge">true</code> =&gt; go to the NEXT clause, if this was the last clause the validation of <code class="highlighter-rouge">switch</code> SUCCEEDS.</li>
      <li><code class="highlighter-rouge">continue</code> property is <code class="highlighter-rouge">false</code> or absent =&gt; validation of <code class="highlighter-rouge">switch</code> SUCCEEDS.</li>
    </ol>
  </li>
</ol>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="s1">'ajv-keywords'</span><span class="p">)(</span><span class="nx">ajv</span><span class="p">,</span> <span class="s1">'switch'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'array'</span><span class="p">,</span>
  <span class="na">items</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="s1">'integer'</span><span class="p">,</span>
    <span class="s1">'switch'</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="na">if</span><span class="p">:</span> <span class="p">{</span> <span class="na">not</span><span class="p">:</span> <span class="p">{</span> <span class="na">minimum</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">},</span> <span class="na">then</span><span class="p">:</span> <span class="kc">false</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">if</span><span class="p">:</span> <span class="p">{</span> <span class="na">maximum</span><span class="p">:</span> <span class="mi">10</span> <span class="p">},</span> <span class="na">then</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">if</span><span class="p">:</span> <span class="p">{</span> <span class="na">maximum</span><span class="p">:</span> <span class="mi">100</span> <span class="p">},</span> <span class="na">then</span><span class="p">:</span> <span class="p">{</span> <span class="na">multipleOf</span><span class="p">:</span> <span class="mi">10</span> <span class="p">}</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">if</span><span class="p">:</span> <span class="p">{</span> <span class="na">maximum</span><span class="p">:</span> <span class="mi">1000</span> <span class="p">},</span> <span class="na">then</span><span class="p">:</span> <span class="p">{</span> <span class="na">multipleOf</span><span class="p">:</span> <span class="mi">100</span> <span class="p">}</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">then</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">validItems</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">1000</span><span class="p">];</span>

<span class="kd">var</span> <span class="nx">invalidItems</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">123</span><span class="p">,</span> <span class="s1">'foo'</span><span class="p">];</span>
</code></pre></div></div>

<p><strong>Please note</strong>: this keyword is moved here from Ajv, mainly to preserve backward compatibility. It is unlikely to become a standard. It’s preferable to use <code class="highlighter-rouge">if</code>/<code class="highlighter-rouge">then</code>/<code class="highlighter-rouge">else</code> keywords if possible, as they are likely to be added to the standard. The above schema is equivalent to (for example):</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">type</span><span class="p">:</span> <span class="s1">'array'</span><span class="p">,</span>
  <span class="nx">items</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">type</span><span class="p">:</span> <span class="s1">'integer'</span><span class="p">,</span>
    <span class="k">if</span><span class="p">:</span> <span class="p">{</span> <span class="nl">minimum</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">maximum</span><span class="p">:</span> <span class="mi">10</span> <span class="p">},</span>
    <span class="nx">then</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="k">else</span><span class="p">:</span> <span class="p">{</span>
      <span class="nl">if</span><span class="p">:</span> <span class="p">{</span> <span class="nl">maximum</span><span class="p">:</span> <span class="mi">100</span> <span class="p">},</span>
      <span class="nx">then</span><span class="p">:</span> <span class="p">{</span> <span class="nl">multipleOf</span><span class="p">:</span> <span class="mi">10</span> <span class="p">},</span>
      <span class="k">else</span><span class="p">:</span> <span class="p">{</span>
        <span class="nl">if</span><span class="p">:</span> <span class="p">{</span> <span class="nl">maximum</span><span class="p">:</span> <span class="mi">1000</span> <span class="p">},</span>
        <span class="nx">then</span><span class="p">:</span> <span class="p">{</span> <span class="nl">multipleOf</span><span class="p">:</span> <span class="mi">100</span> <span class="p">},</span>
        <span class="k">else</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="selectselectcasesselectdefault"><code class="highlighter-rouge">select</code>/<code class="highlighter-rouge">selectCases</code>/<code class="highlighter-rouge">selectDefault</code></h3>

<p>These keywords allow to choose the schema to validate the data based on the value of some property in the validated data.</p>

<p>These keywords must be present in the same schema object (<code class="highlighter-rouge">selectDefault</code> is optional).</p>

<p>The value of <code class="highlighter-rouge">select</code> keyword should be a <a href="https://github.com/epoberezkin/ajv/tree/5.0.2-beta.0#data-reference">$data reference</a> that points to any primitive JSON type (string, number, boolean or null) in the data that is validated. You can also use a constant of primitive type as the value of this keyword (e.g., for debugging purposes).</p>

<p>The value of <code class="highlighter-rouge">selectCases</code> keyword must be an object where each property name is a possible string representation of the value of <code class="highlighter-rouge">select</code> keyword and each property value is a corresponding schema (from draft-06 it can be boolean) that must be used to validate the data.</p>

<p>The value of <code class="highlighter-rouge">selectDefault</code> keyword is a schema (from draft-06 it can be boolean) that must be used to validate the data in case <code class="highlighter-rouge">selectCases</code> has no key equal to the stringified value of <code class="highlighter-rouge">select</code> keyword.</p>

<p>The validation succeeds in one of the following cases:</p>
<ul>
  <li>the validation of data using selected schema succeeds,</li>
  <li>none of the schemas is selected for validation,</li>
  <li>the value of select is undefined (no property in the data that the data reference points to).</li>
</ul>

<p>If <code class="highlighter-rouge">select</code> value (in data) is not a primitive type the validation fails.</p>

<p><strong>Please note</strong>: these keywords require Ajv <code class="highlighter-rouge">$data</code> option to support <a href="https://github.com/epoberezkin/ajv/tree/5.0.2-beta.0#data-reference">$data reference</a>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="s1">'ajv-keywords'</span><span class="p">)(</span><span class="nx">ajv</span><span class="p">,</span> <span class="s1">'select'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="nx">object</span><span class="p">,</span>
  <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="s1">'kind'</span><span class="p">],</span>
  <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">kind</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'string'</span> <span class="p">}</span>
  <span class="p">},</span>
  <span class="na">select</span><span class="p">:</span> <span class="p">{</span> <span class="na">$data</span><span class="p">:</span> <span class="s1">'0/kind'</span> <span class="p">},</span>
  <span class="na">selectCases</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">foo</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="s1">'foo'</span><span class="p">],</span>
      <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">kind</span><span class="p">:</span> <span class="p">{},</span>
        <span class="na">foo</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'string'</span> <span class="p">}</span>
      <span class="p">},</span>
      <span class="na">additionalProperties</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="na">bar</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">required</span><span class="p">:</span> <span class="p">[</span><span class="s1">'bar'</span><span class="p">],</span>
      <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">kind</span><span class="p">:</span> <span class="p">{},</span>
        <span class="na">bar</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'number'</span> <span class="p">}</span>
      <span class="p">},</span>
      <span class="na">additionalProperties</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="na">selectDefault</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">propertyNames</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">not</span><span class="p">:</span> <span class="p">{</span> <span class="na">enum</span><span class="p">:</span> <span class="p">[</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'bar'</span><span class="p">]</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">validDataList</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">kind</span><span class="p">:</span> <span class="s1">'foo'</span><span class="p">,</span> <span class="na">foo</span><span class="p">:</span> <span class="s1">'any'</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">kind</span><span class="p">:</span> <span class="s1">'bar'</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">kind</span><span class="p">:</span> <span class="s1">'anything_else'</span><span class="p">,</span> <span class="na">not_bar_or_foo</span><span class="p">:</span> <span class="s1">'any value'</span> <span class="p">}</span>
<span class="p">];</span>

<span class="kd">var</span> <span class="nx">invalidDataList</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">kind</span><span class="p">:</span> <span class="s1">'foo'</span> <span class="p">},</span> <span class="c1">// no propery foo</span>
  <span class="p">{</span> <span class="na">kind</span><span class="p">:</span> <span class="s1">'bar'</span> <span class="p">},</span> <span class="c1">// no propery bar</span>
  <span class="p">{</span> <span class="na">kind</span><span class="p">:</span> <span class="s1">'foo'</span><span class="p">,</span> <span class="na">foo</span><span class="p">:</span> <span class="s1">'any'</span><span class="p">,</span> <span class="na">another</span><span class="p">:</span> <span class="s1">'any value'</span> <span class="p">},</span> <span class="c1">// additional property</span>
  <span class="p">{</span> <span class="na">kind</span><span class="p">:</span> <span class="s1">'bar'</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">another</span><span class="p">:</span> <span class="s1">'any value'</span> <span class="p">},</span> <span class="c1">// additional property</span>
  <span class="p">{</span> <span class="na">kind</span><span class="p">:</span> <span class="s1">'anything_else'</span><span class="p">,</span> <span class="na">foo</span><span class="p">:</span> <span class="s1">'any'</span> <span class="p">}</span> <span class="c1">// property foo not allowed</span>
  <span class="p">{</span> <span class="nl">kind</span><span class="p">:</span> <span class="s1">'anything_else'</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="c1">// property bar not allowed</span>
<span class="p">];</span>
</code></pre></div></div>

<p><strong>Please note</strong>: the current implementation is BETA. It does not allow using relative URIs in $ref keywords in schemas in <code class="highlighter-rouge">selectCases</code> and <code class="highlighter-rouge">selectDefault</code> that point outside of these schemas. The workaround is to use absolute URIs (that can point to any (sub-)schema added to Ajv, including those inside the current root schema where <code class="highlighter-rouge">select</code> is used). See <a href="https://github.com/epoberezkin/ajv-keywords/blob/v2.0.0/spec/tests/select.json#L314">tests</a>.</p>

<h3 id="patternrequired"><code class="highlighter-rouge">patternRequired</code></h3>

<p>This keyword allows to require the presence of properties that match some pattern(s).</p>

<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>

<p>The value of this keyword should be an array of strings, each string being a regular expression. For data object to be valid each regular expression in this array should match at least one property name in the data object.</p>

<p>If the array contains multiple regular expressions, more than one expression can match the same property name.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span> <span class="na">patternRequired</span><span class="p">:</span> <span class="p">[</span> <span class="s1">'f.*o'</span><span class="p">,</span> <span class="s1">'b.*r'</span> <span class="p">]</span> <span class="p">};</span>

<span class="kd">var</span> <span class="nx">validData</span> <span class="o">=</span> <span class="p">{</span> <span class="na">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">2</span> <span class="p">};</span>
<span class="kd">var</span> <span class="nx">alsoValidData</span> <span class="o">=</span> <span class="p">{</span> <span class="na">foobar</span><span class="p">:</span> <span class="mi">3</span> <span class="p">};</span>

<span class="kd">var</span> <span class="nx">invalidDataList</span> <span class="o">=</span> <span class="p">[</span> <span class="p">{},</span> <span class="p">{</span> <span class="na">foo</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="na">bar</span><span class="p">:</span> <span class="mi">2</span> <span class="p">}</span> <span class="p">];</span>
</code></pre></div></div>

<h3 id="prohibited"><code class="highlighter-rouge">prohibited</code></h3>

<p>This keyword allows to prohibit that any of the properties in the list is present in the object.</p>

<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>

<p>The value of this keyword should be an array of strings, each string being a property name. For data object to be valid none of the properties in this array should be present in the object.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var schema = { prohibited: ['foo', 'bar']};

var validData = { baz: 1 };
var alsoValidData = {};

var invalidDataList = [
  { foo: 1 },
  { bar: 2 },
  { foo: 1, bar: 2}
];
</code></pre></div></div>

<h3 id="deepproperties"><code class="highlighter-rouge">deepProperties</code></h3>

<p>This keyword allows to validate deep properties (identified by JSON pointers).</p>

<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>

<p>The value should be an object, where keys are JSON pointers to the data, starting from the current position in data, and the values are JSON schemas. For data object to be valid the value of each JSON pointer should be valid according to the corresponding schema.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'object'</span><span class="p">,</span>
  <span class="na">deepProperties</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"/users/1/role"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"enum"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"admin"</span><span class="p">]</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">validData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="na">role</span><span class="p">:</span> <span class="s1">'admin'</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">alsoValidData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"1"</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="na">role</span><span class="p">:</span> <span class="s1">'admin'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">invalidData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="na">role</span><span class="p">:</span> <span class="s1">'user'</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">alsoInvalidData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"1"</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="na">role</span><span class="p">:</span> <span class="s1">'user'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="deeprequired"><code class="highlighter-rouge">deepRequired</code></h3>

<p>This keyword allows to check that some deep properties (identified by JSON pointers) are available.</p>

<p>This keyword applies only to objects. If the data is not an object, the validation succeeds.</p>

<p>The value should be an array of JSON pointers to the data, starting from the current position in data. For data object to be valid each JSON pointer should be some existing part of the data.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'object'</span><span class="p">,</span>
  <span class="na">deepRequired</span><span class="p">:</span> <span class="p">[</span><span class="s2">"/users/1/role"</span><span class="p">]</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">validData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="na">role</span><span class="p">:</span> <span class="s1">'admin'</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">invalidData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">123</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">};</span>
</code></pre></div></div>

<p>See <a href="https://github.com/json-schema-org/json-schema-spec/issues/203#issue-197211916">json-schema-org/json-schema-spec#203</a> for an example of the equivalent schema without <code class="highlighter-rouge">deepRequired</code> keyword.</p>

<h3 id="uniqueitemproperties"><code class="highlighter-rouge">uniqueItemProperties</code></h3>

<p>The keyword allows to check that some properties in array items are unique.</p>

<p>This keyword applies only to arrays. If the data is not an array, the validation succeeds.</p>

<p>The value of this keyword must be an array of strings - property names that should have unique values across all items.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span> <span class="na">uniqueItemProperties</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"id"</span><span class="p">,</span> <span class="s2">"name"</span> <span class="p">]</span> <span class="p">};</span>

<span class="kd">var</span> <span class="nx">validData</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">2</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">3</span> <span class="p">}</span>
<span class="p">];</span>

<span class="kd">var</span> <span class="nx">invalidData1</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">3</span> <span class="p">}</span>
<span class="p">];</span>

<span class="kd">var</span> <span class="nx">invalidData2</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s2">"taco"</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s2">"taco"</span> <span class="p">},</span> <span class="c1">// duplicate "name"</span>
  <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s2">"salsa"</span> <span class="p">}</span>
<span class="p">];</span>
</code></pre></div></div>

<p>This keyword is contributed by <a href="https://github.com/blainesch">@blainesch</a>.</p>

<h3 id="regexp"><code class="highlighter-rouge">regexp</code></h3>

<p>This keyword allows to use regular expressions with flags in schemas (the standard <code class="highlighter-rouge">pattern</code> keyword does not support flags).</p>

<p>This keyword applies only to strings. If the data is not a string, the validation succeeds.</p>

<p>The value of this keyword can be either a string (the result of <code class="highlighter-rouge">regexp.toString()</code>) or an object with the properties <code class="highlighter-rouge">pattern</code> and <code class="highlighter-rouge">flags</code> (the same strings that should be passed to RegExp constructor).</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'object'</span><span class="p">,</span>
  <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">foo</span><span class="p">:</span> <span class="p">{</span> <span class="na">regexp</span><span class="p">:</span> <span class="s1">'/foo/i'</span> <span class="p">},</span>
    <span class="na">bar</span><span class="p">:</span> <span class="p">{</span> <span class="na">regexp</span><span class="p">:</span> <span class="p">{</span> <span class="na">pattern</span><span class="p">:</span> <span class="s1">'bar'</span><span class="p">,</span> <span class="na">flags</span><span class="p">:</span> <span class="s1">'i'</span> <span class="p">}</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">validData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">foo</span><span class="p">:</span> <span class="s1">'Food'</span><span class="p">,</span>
  <span class="na">bar</span><span class="p">:</span> <span class="s1">'Barmen'</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">invalidData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">foo</span><span class="p">:</span> <span class="s1">'fog'</span><span class="p">,</span>
  <span class="na">bar</span><span class="p">:</span> <span class="s1">'bad'</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="formatmaximum--formatminimum-and-formatexclusivemaximum--formatexclusiveminimum"><code class="highlighter-rouge">formatMaximum</code> / <code class="highlighter-rouge">formatMinimum</code> and <code class="highlighter-rouge">formatExclusiveMaximum</code> / <code class="highlighter-rouge">formatExclusiveMinimum</code></h3>

<p>These keywords allow to define minimum/maximum constraints when the format keyword defines ordering.</p>

<p>These keywords apply only to strings. If the data is not a string, the validation succeeds.</p>

<p>The value of keyword <code class="highlighter-rouge">formatMaximum</code> (<code class="highlighter-rouge">formatMinimum</code>) should be a string. This value is the maximum (minimum) allowed value for the data to be valid as determined by <code class="highlighter-rouge">format</code> keyword.</p>

<p>When this keyword is added, it defines comparison rules for formats <code class="highlighter-rouge">"date"</code>, <code class="highlighter-rouge">"time"</code> and `“date-time”. Custom formats also can have comparison rules. See <a href="https://github.com/epoberezkin/ajv#api-addformat">addFormat</a> method.</p>

<p>The value of keyword <code class="highlighter-rouge">formatExclusiveMaximum</code> (<code class="highlighter-rouge">formatExclusiveMinimum</code>) should be a boolean value. These keyword cannot be used without <code class="highlighter-rouge">formatMaximum</code> (<code class="highlighter-rouge">formatMinimum</code>). If this keyword value is equal to <code class="highlighter-rouge">true</code>, the data to be valid should not be equal to the value in <code class="highlighter-rouge">formatMaximum</code> (<code class="highlighter-rouge">formatMinimum</code>) keyword.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">require</span><span class="p">(</span><span class="s1">'ajv-keywords'</span><span class="p">)(</span><span class="nx">ajv</span><span class="p">,</span> <span class="p">[</span><span class="s1">'formatMinimum'</span><span class="p">,</span> <span class="s1">'formatMaximum'</span><span class="p">]);</span>

<span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">format</span><span class="p">:</span> <span class="s1">'date'</span><span class="p">,</span>
  <span class="na">formatMinimum</span><span class="p">:</span> <span class="s1">'2016-02-06'</span><span class="p">,</span>
  <span class="na">formatMaximum</span><span class="p">:</span> <span class="s1">'2016-12-27'</span><span class="p">,</span>
  <span class="na">formatExclusiveMaximum</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">validDataList</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'2016-02-06'</span><span class="p">,</span> <span class="s1">'2016-12-26'</span><span class="p">,</span> <span class="mi">1</span><span class="p">];</span>

<span class="kd">var</span> <span class="nx">invalidDataList</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'2016-02-05'</span><span class="p">,</span> <span class="s1">'2016-12-27'</span><span class="p">,</span> <span class="s1">'abc'</span><span class="p">];</span>
</code></pre></div></div>

<h3 id="dynamicdefaults"><code class="highlighter-rouge">dynamicDefaults</code></h3>

<p>This keyword allows to assign dynamic defaults to properties, such as timestamps, unique IDs etc.</p>

<p>This keyword only works if <code class="highlighter-rouge">useDefaults</code> options is used and not inside <code class="highlighter-rouge">anyOf</code> keywrods etc., in the same way as <a href="https://github.com/epoberezkin/ajv#assigning-defaults">default keyword treated by Ajv</a>.</p>

<p>The keyword should be added on the object level. Its value should be an object with each property corresponding to a property name, in the same way as in standard <code class="highlighter-rouge">properties</code> keyword. The value of each property can be:</p>

<ul>
  <li>an identifier of default function (a string)</li>
  <li>an object with properties <code class="highlighter-rouge">func</code> (an identifier) and <code class="highlighter-rouge">args</code> (an object with parameters that will be passed to this function during schema compilation - see examples).</li>
</ul>

<p>The properties used in <code class="highlighter-rouge">dynamicDefaults</code> should not be added to <code class="highlighter-rouge">required</code> keyword (or validation will fail), because unlike <code class="highlighter-rouge">default</code> this keyword is processed after validation.</p>

<p>There are several predefined dynamic default functions:</p>

<ul>
  <li><code class="highlighter-rouge">"timestamp"</code> - current timestamp in milliseconds</li>
  <li><code class="highlighter-rouge">"datetime"</code> - current date and time as string (ISO, valid according to <code class="highlighter-rouge">date-time</code> format)</li>
  <li><code class="highlighter-rouge">"date"</code> - current date as string (ISO, valid according to <code class="highlighter-rouge">date</code> format)</li>
  <li><code class="highlighter-rouge">"time"</code> - current time as string (ISO, valid according to <code class="highlighter-rouge">time</code> format)</li>
  <li><code class="highlighter-rouge">"random"</code> - pseudo-random number in [0, 1) interval</li>
  <li><code class="highlighter-rouge">"randomint"</code> - pseudo-random integer number. If string is used as a property value, the function will randomly return 0 or 1. If object <code class="highlighter-rouge">{func: 'randomint', max: N}</code> is used then the default will be an integer number in [0, N) interval.</li>
  <li><code class="highlighter-rouge">"seq"</code> - sequential integer number starting from 0. If string is used as a property value, the default sequence will be used. If object <code class="highlighter-rouge">{func: 'seq', name: 'foo'}</code> is used then the sequence with name <code class="highlighter-rouge">"foo"</code> will be used. Sequences are global, even if different ajv instances are used.</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">type</span><span class="p">:</span> <span class="s1">'object'</span><span class="p">,</span>
  <span class="na">dynamicDefaults</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">ts</span><span class="p">:</span> <span class="s1">'datetime'</span><span class="p">,</span>
    <span class="na">r</span><span class="p">:</span> <span class="p">{</span> <span class="na">func</span><span class="p">:</span> <span class="s1">'randomint'</span><span class="p">,</span> <span class="na">max</span><span class="p">:</span> <span class="mi">100</span> <span class="p">},</span>
    <span class="na">id</span><span class="p">:</span> <span class="p">{</span> <span class="na">func</span><span class="p">:</span> <span class="s1">'seq'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'id'</span> <span class="p">}</span>
  <span class="p">},</span>
  <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">ts</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="s1">'string'</span><span class="p">,</span>
      <span class="na">format</span><span class="p">:</span> <span class="s1">'datetime'</span>
    <span class="p">},</span>
    <span class="na">r</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="s1">'integer'</span><span class="p">,</span>
      <span class="na">minimum</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="na">maximum</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
      <span class="na">exclusiveMaximum</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="na">id</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="s1">'integer'</span><span class="p">,</span>
      <span class="na">minimum</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">data</span><span class="p">;</span> <span class="c1">// { ts: '2016-12-01T22:07:28.829Z', r: 25, id: 0 }</span>

<span class="kd">var</span> <span class="nx">data1</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">data1</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">data1</span><span class="p">;</span> <span class="c1">// { ts: '2016-12-01T22:07:29.832Z', r: 68, id: 1 }</span>

<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">data1</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">data1</span><span class="p">;</span> <span class="c1">// didn't change, as all properties were defined</span>
</code></pre></div></div>

<p>You can add your own dynamic default function to be recognised by this keyword:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">uuid</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'uuid'</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">uuidV4</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">uuid</span><span class="p">.</span><span class="nx">v4</span><span class="p">();</span> <span class="p">}</span>

<span class="kd">var</span> <span class="nx">definition</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'ajv-keywords'</span><span class="p">).</span><span class="kd">get</span><span class="p">(</span><span class="s1">'dynamicDefaults'</span><span class="p">).</span><span class="nx">definition</span><span class="p">;</span>
<span class="c1">// or require('ajv-keywords/keywords/dynamicDefaults').definition;</span>
<span class="nx">definition</span><span class="p">.</span><span class="nx">DEFAULTS</span><span class="p">.</span><span class="nx">uuid</span> <span class="o">=</span> <span class="nx">uuidV4</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">dynamicDefaults</span><span class="p">:</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="s1">'uuid'</span> <span class="p">},</span>
  <span class="na">properties</span><span class="p">:</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="s1">'string'</span><span class="p">,</span> <span class="na">format</span><span class="p">:</span> <span class="s1">'uuid'</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">data</span><span class="p">;</span> <span class="c1">// { id: 'a1183fbe-697b-4030-9bcc-cfeb282a9150' };</span>

<span class="kd">var</span> <span class="nx">data1</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">ajv</span><span class="p">.</span><span class="nx">validate</span><span class="p">(</span><span class="nx">schema</span><span class="p">,</span> <span class="nx">data1</span><span class="p">);</span> <span class="c1">// true</span>
<span class="nx">data1</span><span class="p">;</span> <span class="c1">// { id: '5b008de7-1669-467a-a5c6-70fa244d7209' }</span>
</code></pre></div></div>

<p>You also can define dynamic default that accepts parameters, e.g. version of uuid:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">uuid</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'uuid'</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">getUuid</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">version</span> <span class="o">=</span> <span class="s1">'v'</span> <span class="o">+</span> <span class="p">(</span><span class="nx">arvs</span> <span class="o">&amp;&amp;</span> <span class="nx">args</span><span class="p">.</span><span class="nx">v</span> <span class="o">||</span> <span class="mi">4</span><span class="p">);</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">uuid</span><span class="p">[</span><span class="nx">version</span><span class="p">]();</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">definition</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'ajv-keywords'</span><span class="p">).</span><span class="kd">get</span><span class="p">(</span><span class="s1">'dynamicDefaults'</span><span class="p">).</span><span class="nx">definition</span><span class="p">;</span>
<span class="nx">definition</span><span class="p">.</span><span class="nx">DEFAULTS</span><span class="p">.</span><span class="nx">uuid</span> <span class="o">=</span> <span class="nx">getUuid</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">dynamicDefaults</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">id1</span><span class="p">:</span> <span class="s1">'uuid'</span><span class="p">,</span> <span class="c1">// v4</span>
    <span class="na">id2</span><span class="p">:</span> <span class="p">{</span> <span class="na">func</span><span class="p">:</span> <span class="s1">'uuid'</span><span class="p">,</span> <span class="na">v</span><span class="p">:</span> <span class="mi">4</span> <span class="p">},</span> <span class="c1">// v4</span>
    <span class="na">id3</span><span class="p">:</span> <span class="p">{</span> <span class="na">func</span><span class="p">:</span> <span class="s1">'uuid'</span><span class="p">,</span> <span class="na">v</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="c1">// v1</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="license">License</h2>

<p><a href="https://github.com/epoberezkin/ajv-keywords/blob/master/LICENSE">MIT</a></p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
    
  </body>
</html>
