<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>loader-utils | estebang23.github.io</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="loader-utils" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/node_modules/loader-utils/" />
<meta property="og:url" content="http://localhost:4000/node_modules/loader-utils/" />
<meta property="og:site_name" content="estebang23.github.io" />
<script type="application/ld+json">
{"@type":"WebPage","url":"http://localhost:4000/node_modules/loader-utils/","headline":"loader-utils","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=08194154e5c3f87742365edb210c0599bab19902">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">estebang23.github.io</a></h1>
      

      <h1 id="loader-utils">loader-utils</h1>

<h2 id="methods">Methods</h2>

<h3 id="getoptions"><code class="highlighter-rouge">getOptions</code></h3>

<p>Recommended way to retrieve the options of a loader invocation:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// inside your loader</span>
<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">getOptions</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</code></pre></div></div>

<ol>
  <li>If <code class="highlighter-rouge">this.query</code> is a string:
    <ul>
      <li>Tries to parse the query string and returns a new object</li>
      <li>Throws if it’s not a valid query string</li>
    </ul>
  </li>
  <li>If <code class="highlighter-rouge">this.query</code> is object-like, it just returns <code class="highlighter-rouge">this.query</code></li>
  <li>In any other case, it just returns <code class="highlighter-rouge">null</code></li>
</ol>

<p><strong>Please note:</strong> The returned <code class="highlighter-rouge">options</code> object is <em>read-only</em>. It may be re-used across multiple invocations.
If you pass it on to another library, make sure to make a <em>deep copy</em> of it:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span>
	<span class="p">{},</span>
	<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">getOptions</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="c1">// it is safe to pass null to Object.assign()</span>
	<span class="nx">defaultOptions</span>
<span class="p">);</span>
<span class="c1">// don't forget nested objects or arrays</span>
<span class="nx">options</span><span class="p">.</span><span class="nx">obj</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span> <span class="nx">options</span><span class="p">.</span><span class="nx">obj</span><span class="p">);</span> 
<span class="nx">options</span><span class="p">.</span><span class="nx">arr</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">arr</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
<span class="nx">someLibrary</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</code></pre></div></div>

<p><a href="https://www.npmjs.com/package/clone-deep">clone-deep</a> is a good library to make a deep copy of the options.</p>

<h4 id="options-as-query-strings">Options as query strings</h4>

<p>If the loader options have been passed as loader query string (<code class="highlighter-rouge">loader?some&amp;params</code>), the string is parsed by using <a href="#parsequery"><code class="highlighter-rouge">parseQuery</code></a>.</p>

<h3 id="parsequery"><code class="highlighter-rouge">parseQuery</code></h3>

<p>Parses a passed string (e.g. <code class="highlighter-rouge">loaderContext.resourceQuery</code>) as a query string, and returns an object.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">parseQuery</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">resourceQuery</span><span class="p">);</span> <span class="c1">// resource: `file?param1=foo`</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">param1</span> <span class="o">===</span> <span class="s2">"foo"</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// do something</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The string is parsed like this:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                             -&gt; Error
?                            -&gt; {}
?flag                        -&gt; { flag: true }
?+flag                       -&gt; { flag: true }
?-flag                       -&gt; { flag: false }
?xyz=test                    -&gt; { xyz: "test" }
?xyz=1                       -&gt; { xyz: "1" } // numbers are NOT parsed
?xyz[]=a                     -&gt; { xyz: ["a"] }
?flag1&amp;flag2                 -&gt; { flag1: true, flag2: true }
?+flag1,-flag2               -&gt; { flag1: true, flag2: false }
?xyz[]=a,xyz[]=b             -&gt; { xyz: ["a", "b"] }
?a%2C%26b=c%2C%26d           -&gt; { "a,&amp;b": "c,&amp;d" }
?{data:{a:1},isJSON5:true}   -&gt; { data: { a: 1 }, isJSON5: true }
</code></pre></div></div>

<h3 id="stringifyrequest"><code class="highlighter-rouge">stringifyRequest</code></h3>

<p>Turns a request into a string that can be used inside <code class="highlighter-rouge">require()</code> or <code class="highlighter-rouge">import</code> while avoiding absolute paths.
Use it instead of <code class="highlighter-rouge">JSON.stringify(...)</code> if you’re generating code inside a loader.</p>

<p><strong>Why is this necessary?</strong> Since webpack calculates the hash before module paths are translated into module ids, we must avoid absolute paths to ensure
consistent hashes across different compilations.</p>

<p>This function:</p>

<ul>
  <li>resolves absolute requests into relative requests if the request and the module are on the same hard drive</li>
  <li>replaces <code class="highlighter-rouge">\</code> with <code class="highlighter-rouge">/</code> if the request and the module are on the same hard drive</li>
  <li>won’t change the path at all if the request and the module are on different hard drives</li>
  <li>applies <code class="highlighter-rouge">JSON.stringify</code> to the result</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">stringifyRequest</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">"./test.js"</span><span class="p">);</span>
<span class="c1">// "\"./test.js\""</span>

<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">stringifyRequest</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">".</span><span class="err">\\</span><span class="s2">test.js"</span><span class="p">);</span>
<span class="c1">// "\"./test.js\""</span>

<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">stringifyRequest</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">"test"</span><span class="p">);</span>
<span class="c1">// "\"test\""</span>

<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">stringifyRequest</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">"test/lib/index.js"</span><span class="p">);</span>
<span class="c1">// "\"test/lib/index.js\""</span>

<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">stringifyRequest</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">"otherLoader?andConfig!test?someConfig"</span><span class="p">);</span>
<span class="c1">// "\"otherLoader?andConfig!test?someConfig\""</span>

<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">stringifyRequest</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s2">"test"</span><span class="p">));</span>
<span class="c1">// "\"../node_modules/some-loader/lib/test.js\""</span>

<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">stringifyRequest</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">"C:</span><span class="err">\\</span><span class="s2">module</span><span class="err">\\</span><span class="s2">test.js"</span><span class="p">);</span>
<span class="c1">// "\"../../test.js\"" (on Windows, in case the module and the request are on the same drive)</span>

<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">stringifyRequest</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">"C:</span><span class="err">\\</span><span class="s2">module</span><span class="err">\\</span><span class="s2">test.js"</span><span class="p">);</span>
<span class="c1">// "\"C:\\module\\test.js\"" (on Windows, in case the module and the request are on different drives)</span>

<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">stringifyRequest</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">"</span><span class="err">\\\\</span><span class="s2">network-drive</span><span class="err">\\</span><span class="s2">test.js"</span><span class="p">);</span>
<span class="c1">// "\"\\\\network-drive\\\\test.js\"" (on Windows, in case the module and the request are on different drives)</span>
</code></pre></div></div>

<h3 id="urltorequest"><code class="highlighter-rouge">urlToRequest</code></h3>

<p>Converts some resource URL to a webpack module request.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">"path/to/module.js"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">urlToRequest</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span> <span class="c1">// "./path/to/module.js"</span>
</code></pre></div></div>

<h4 id="module-urls">Module URLs</h4>

<p>Any URL containing a <code class="highlighter-rouge">~</code> will be interpreted as a module request. Anything after the <code class="highlighter-rouge">~</code> will be considered the request path.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">"~path/to/module.js"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">urlToRequest</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span> <span class="c1">// "path/to/module.js"</span>
</code></pre></div></div>

<h4 id="root-relative-urls">Root-relative URLs</h4>

<p>URLs that are root-relative (start with <code class="highlighter-rouge">/</code>) can be resolved relative to some arbitrary path by using the <code class="highlighter-rouge">root</code> parameter:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">"/path/to/module.js"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">root</span> <span class="o">=</span> <span class="s2">"./root"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">urlToRequest</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">root</span><span class="p">);</span> <span class="c1">// "./root/path/to/module.js"</span>
</code></pre></div></div>

<p>To convert a root-relative URL into a module URL, specify a <code class="highlighter-rouge">root</code> value that starts with <code class="highlighter-rouge">~</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">"/path/to/module.js"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">root</span> <span class="o">=</span> <span class="s2">"~"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">urlToRequest</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">root</span><span class="p">);</span> <span class="c1">// "path/to/module.js"</span>
</code></pre></div></div>

<h3 id="interpolatename"><code class="highlighter-rouge">interpolateName</code></h3>

<p>Interpolates a filename template using multiple placeholders and/or a regular expression.
The template and regular expression are set as query params called <code class="highlighter-rouge">name</code> and <code class="highlighter-rouge">regExp</code> on the current loader’s context.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">interpolatedName</span> <span class="o">=</span> <span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">interpolateName</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</code></pre></div></div>

<p>The following tokens are replaced in the <code class="highlighter-rouge">name</code> parameter:</p>

<ul>
  <li><code class="highlighter-rouge">[ext]</code> the extension of the resource</li>
  <li><code class="highlighter-rouge">[name]</code> the basename of the resource</li>
  <li><code class="highlighter-rouge">[path]</code> the path of the resource relative to the <code class="highlighter-rouge">context</code> query parameter or option.</li>
  <li><code class="highlighter-rouge">[folder]</code> the folder of the resource is in.</li>
  <li><code class="highlighter-rouge">[emoji]</code> a random emoji representation of <code class="highlighter-rouge">options.content</code></li>
  <li><code class="highlighter-rouge">[emoji:&lt;length&gt;]</code> same as above, but with a customizable number of emojis</li>
  <li><code class="highlighter-rouge">[hash]</code> the hash of <code class="highlighter-rouge">options.content</code> (Buffer) (by default it’s the hex digest of the md5 hash)</li>
  <li><code class="highlighter-rouge">[&lt;hashType&gt;:hash:&lt;digestType&gt;:&lt;length&gt;]</code> optionally one can configure
    <ul>
      <li>other <code class="highlighter-rouge">hashType</code>s, i. e. <code class="highlighter-rouge">sha1</code>, <code class="highlighter-rouge">md5</code>, <code class="highlighter-rouge">sha256</code>, <code class="highlighter-rouge">sha512</code></li>
      <li>other <code class="highlighter-rouge">digestType</code>s, i. e. <code class="highlighter-rouge">hex</code>, <code class="highlighter-rouge">base26</code>, <code class="highlighter-rouge">base32</code>, <code class="highlighter-rouge">base36</code>, <code class="highlighter-rouge">base49</code>, <code class="highlighter-rouge">base52</code>, <code class="highlighter-rouge">base58</code>, <code class="highlighter-rouge">base62</code>, <code class="highlighter-rouge">base64</code></li>
      <li>and <code class="highlighter-rouge">length</code> the length in chars</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">[N]</code> the N-th match obtained from matching the current file name against <code class="highlighter-rouge">options.regExp</code></li>
</ul>

<p>Examples</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// loaderContext.resourcePath = "/app/js/javascript.js"</span>
<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">interpolateName</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="s2">"js/[hash].script.[ext]"</span><span class="p">,</span> <span class="p">{</span> <span class="na">content</span><span class="p">:</span> <span class="p">...</span> <span class="p">});</span>
<span class="c1">// =&gt; js/9473fdd0d880a43c21b7778d34872157.script.js</span>

<span class="c1">// loaderContext.resourcePath = "/app/page.html"</span>
<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">interpolateName</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="s2">"html-[hash:6].html"</span><span class="p">,</span> <span class="p">{</span> <span class="na">content</span><span class="p">:</span> <span class="p">...</span> <span class="p">});</span>
<span class="c1">// =&gt; html-9473fd.html</span>

<span class="c1">// loaderContext.resourcePath = "/app/flash.txt"</span>
<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">interpolateName</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="s2">"[hash]"</span><span class="p">,</span> <span class="p">{</span> <span class="na">content</span><span class="p">:</span> <span class="p">...</span> <span class="p">});</span>
<span class="c1">// =&gt; c31e9820c001c9c4a86bce33ce43b679</span>

<span class="c1">// loaderContext.resourcePath = "/app/img/image.gif"</span>
<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">interpolateName</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="s2">"[emoji]"</span><span class="p">,</span> <span class="p">{</span> <span class="na">content</span><span class="p">:</span> <span class="p">...</span> <span class="p">});</span>
<span class="c1">// =&gt; 👍</span>

<span class="c1">// loaderContext.resourcePath = "/app/img/image.gif"</span>
<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">interpolateName</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="s2">"[emoji:4]"</span><span class="p">,</span> <span class="p">{</span> <span class="na">content</span><span class="p">:</span> <span class="p">...</span> <span class="p">});</span>
<span class="c1">// =&gt; 🙍🏢📤🐝</span>

<span class="c1">// loaderContext.resourcePath = "/app/img/image.png"</span>
<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">interpolateName</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="s2">"[sha512:hash:base64:7].[ext]"</span><span class="p">,</span> <span class="p">{</span> <span class="na">content</span><span class="p">:</span> <span class="p">...</span> <span class="p">});</span>
<span class="c1">// =&gt; 2BKDTjl.png</span>
<span class="c1">// use sha512 hash instead of md5 and with only 7 chars of base64</span>

<span class="c1">// loaderContext.resourcePath = "/app/img/myself.png"</span>
<span class="c1">// loaderContext.query.name =</span>
<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">interpolateName</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="s2">"picture.png"</span><span class="p">);</span>
<span class="c1">// =&gt; picture.png</span>

<span class="c1">// loaderContext.resourcePath = "/app/dir/file.png"</span>
<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">interpolateName</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="s2">"[path][name].[ext]?[hash]"</span><span class="p">,</span> <span class="p">{</span> <span class="na">content</span><span class="p">:</span> <span class="p">...</span> <span class="p">});</span>
<span class="c1">// =&gt; /app/dir/file.png?9473fdd0d880a43c21b7778d34872157</span>

<span class="c1">// loaderContext.resourcePath = "/app/js/page-home.js"</span>
<span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">interpolateName</span><span class="p">(</span><span class="nx">loaderContext</span><span class="p">,</span> <span class="s2">"script-[1].[ext]"</span><span class="p">,</span> <span class="p">{</span> <span class="na">regExp</span><span class="p">:</span> <span class="s2">"page-(.*)</span><span class="err">\\</span><span class="s2">.js"</span><span class="p">,</span> <span class="na">content</span><span class="p">:</span> <span class="p">...</span> <span class="p">});</span>
<span class="c1">// =&gt; script-home.js</span>
</code></pre></div></div>

<h3 id="gethashdigest"><code class="highlighter-rouge">getHashDigest</code></h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">digestString</span> <span class="o">=</span> <span class="nx">loaderUtils</span><span class="p">.</span><span class="nx">getHashDigest</span><span class="p">(</span><span class="nx">buffer</span><span class="p">,</span> <span class="nx">hashType</span><span class="p">,</span> <span class="nx">digestType</span><span class="p">,</span> <span class="nx">maxLength</span><span class="p">);</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">buffer</code> the content that should be hashed</li>
  <li><code class="highlighter-rouge">hashType</code> one of <code class="highlighter-rouge">sha1</code>, <code class="highlighter-rouge">md5</code>, <code class="highlighter-rouge">sha256</code>, <code class="highlighter-rouge">sha512</code> or any other node.js supported hash type</li>
  <li><code class="highlighter-rouge">digestType</code> one of <code class="highlighter-rouge">hex</code>, <code class="highlighter-rouge">base26</code>, <code class="highlighter-rouge">base32</code>, <code class="highlighter-rouge">base36</code>, <code class="highlighter-rouge">base49</code>, <code class="highlighter-rouge">base52</code>, <code class="highlighter-rouge">base58</code>, <code class="highlighter-rouge">base62</code>, <code class="highlighter-rouge">base64</code></li>
  <li><code class="highlighter-rouge">maxLength</code> the maximum length in chars</li>
</ul>

<h2 id="license">License</h2>

<p>MIT (http://www.opensource.org/licenses/mit-license.php)</p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
    
  </body>
</html>
